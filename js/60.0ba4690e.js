"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[60],{6060:function(t,a,i){i.r(a),i.d(a,{default:function(){return l}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"classification"},[i("goodsTabs",{ref:"goodsTabsRef",attrs:{offsetTop:-1},on:{goDetails:t.details}})],1)},s=[],r=(i(7658),i(3453)),o={components:{GoodsTabs:r.Z},data(){return{}},mounted(){this.initProductCatTreeList()},methods:{initProductCatTreeList(){this.$api.productCatTreeList().then((t=>{"core.0000"===t.code?this.$refs["goodsTabsRef"].initList(t.data):this.$toast("服务器错误")}))},details(t){this.$router.push({path:"/productDetails",params:{...t}})}}},c=o,d=i(3736),n=(0,d.Z)(c,e,s,!1,null,null,null),l=n.exports},3453:function(t,a,i){i.d(a,{Z:function(){return l}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{ref:"tab",staticClass:"goods-tabs"},[i("van-sticky",{attrs:{"offset-top":t.offsetTop}},[i("div",{staticClass:"color"},[i("van-tabs",{on:{click:t.onClick},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.tabList,(function(a,e){return i("van-tab",{key:e,attrs:{title:a.prodBgCatalogDto.catName}},[i("div",{staticClass:"btm-flex"},t._l(a.child,(function(a,e){return i("div",{key:e,staticClass:"border",class:t.btmActive===e?"bule":"",on:{click:function(i){return t.checkoutBtm(a,e)}}},[t._v(t._s(a.prodBgCatalogDto.catName))])})),0)])})),1)],1)]),i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.productList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[i("div",{staticClass:"img-box"},t._l(t.dataList,(function(a,e){return i("label-card",t._g({key:e,attrs:{cardObj:a}},t.$listeners))})),1)])],1)},s=[],r=(i(541),i(3275)),o={name:"goodsTabs",props:{offsetTop:{type:Number,default:""}},components:{LabelCard:r.Z},data(){return{active:0,tabList:[{prodBgCatalogDto:{catName:"全部",bgCatId:null},child:[{prodBgCatalogDto:{catName:"全部",bgCatId:null}}]}],btmActive:0,pageSize:10,pageNow:1,loading:!1,finished:!1,dataList:[],bgCatId:"",btmLoading:!0}},mounted(){},methods:{initList(t){let a={prodBgCatalogDto:{catName:"全部",bgCatId:null}};t.unshift(a);for(let i=0;i<t.length;i++){let e=[];e=Array.isArray(t[i].child)?t[i].child:[],e.unshift(a)}this.tabList=t,this.$nextTick((()=>{this.active=this.$route.params.id||0,this.loadData(this.tabList[this.active].prodBgCatalogDto.bgCatId)}))},checkoutBtm(t,a){this.btmActive=a,this.btmLoading&&this.loadData(t.prodBgCatalogDto.bgCatId)},onClick(){this.btmActive=0,this.btmLoading=!1,this.loadData(this.tabList[this.active].prodBgCatalogDto.bgCatId)},productList(){this.loading=!0;let t={keyWord:"",bgCatIds:this.bgCatId?[this.bgCatId]:[],lowestPrice:"",highestPrice:"",orderBys:{},landId:0,pageSize:this.pageSize,pageNow:this.pageNow};this.$api.productList(t).then((t=>{"core.0000"==t.code?(this.dataList=[...this.dataList,...t.data.list],this.loading=!1,this.dataList.length>=t.data.total&&(this.finished=!0),this.btmLoading=!0,this.pageNow++):this.loading=!1})).catch((t=>{this.loading=!1,this.finished=!0,this.$toast("服务器错误")}))},loadData(t){this.bgCatId=t,this.pageSize=10,this.pageNow=1,this.dataList=[],this.loading=!1,this.finished=!1,this.productList()}}},c=o,d=i(3736),n=(0,d.Z)(c,e,s,!1,null,"ffadde7e",null),l=n.exports},3275:function(t,a,i){i.d(a,{Z:function(){return n}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"card",on:{click:function(a){return t.details(t.cardObj)}}},[i("img",{directives:[{name:"real-img",rawName:"v-real-img",value:t.cardObj.picUrl,expression:"cardObj.picUrl"}],staticClass:"card-img",attrs:{alt:""}}),i("div",{staticClass:"right"},[i("div",{staticClass:"card-title"},[t._v(t._s(t.cardObj.prodName))]),i("div",{staticClass:"price"},[i("span",{staticClass:"size"},[t._v(t._s(t.price))])]),i("div",{staticClass:"flex"},[t.cardObj.prodSourceName?i("div",{staticClass:"blue"},[t._v(t._s(t.cardObj.prodSourceName))]):t._e(),t.cardObj.prodTypeName?i("div",{staticClass:"red"},[t._v(t._s(t.cardObj.prodTypeName))]):t._e()])])])},s=[],r={name:"labelCard",props:{cardObj:{type:Object,default:()=>{}}},data(){return{}},mounted(){},computed:{price(){return this.cardObj.highestPrice&&this.cardObj.lowestPrice?`¥${this.handlePriceData(this.cardObj.lowestPrice)}-¥${this.handlePriceData(this.cardObj.highestPrice)}`:this.cardObj.highestPrice?`¥${this.handlePriceData(this.cardObj.highestPrice)}`:this.cardObj.lowestPrice?`¥${this.handlePriceData(this.cardObj.lowestPrice)}起`:"未上架"}},methods:{handlePriceData(t){return(t/100).toFixed(1)},details(t){this.$emit("goDetails",t)}}},o=r,c=i(3736),d=(0,c.Z)(o,e,s,!1,null,"4433ad52",null),n=d.exports},5117:function(t,a,i){var e=i(6330),s=TypeError;t.exports=function(t,a){if(!delete t[a])throw s("Cannot delete property "+e(a)+" of "+e(t))}},541:function(t,a,i){var e=i(2109),s=i(7908),r=i(6244),o=i(3658),c=i(5117),d=i(7207),n=1!==[].unshift(0),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();e({target:"Array",proto:!0,arity:1,forced:n||l},{unshift:function(t){var a=s(this),i=r(a),e=arguments.length;if(e){d(i+e);var n=i;while(n--){var l=n+e;n in a?a[l]=a[n]:c(a,l)}for(var h=0;h<e;h++)a[h]=arguments[h]}return o(a,i+e)}})}}]);