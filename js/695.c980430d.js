"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[695],{6478:function(e,t,s){s.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.item.orderItems?r("div",{staticClass:"address"},[r("img",{attrs:{src:s(3509),alt:""}}),r("div",[r("p",[r("span",{staticClass:"name"},[e._v(e._s(e.item.orderItems[0].orderRecvInfos[0].receiverName))]),r("span",{staticClass:"phone"},[e._v(e._s(e.item.orderItems[0].orderRecvInfos[0].recvPhone))])]),r("p",{staticClass:"location"},[e._v(e._s(e.item.orderItems[0].orderRecvInfos[0].recvAddress))])]),e.isEdit?r("span",{staticClass:"button",on:{click:function(t){return t.stopPropagation(),e.handleAddress.apply(null,arguments)}}},[e._v("修改")]):e._e()]):e._e(),r("productSendTo",{ref:"sendToRef",on:{onAddress:e.onAddress}})],1)},a=[],i=s(9059),n={components:{productSendTo:i.Z},props:{isEdit:{type:Boolean,default:!0},item:{type:Object,default:()=>{}}},data(){return{}},methods:{onAddress(e){this.$emit("Address",e)},handleAddress(){this.$refs.sendToRef.showPopup=!0}}},o=n,d=s(3736),l=(0,d.Z)(o,r,a,!1,null,null,null),u=l.exports},4934:function(e,t,s){s.d(t,{Z:function(){return l}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0!=e.list.rightBtnStatusList.length||0!=e.list.btnStatusList.length?s("div",{staticClass:"tab",style:"list"==e.source?"position: unset;":"padding: 0 10px;box-sizing: border-box;"},[s("van-popover",{attrs:{placement:"top-start",trigger:"click",actions:e.list.btnStatusList},on:{select:e.onSelect},scopedSlots:e._u([{key:"reference",fn:function(){return[s("span",{directives:[{name:"show",rawName:"v-show",value:e.list.btnStatusList.length>0,expression:"list.btnStatusList.length > 0"}]},[e._v("更多")])]},proxy:!0}],null,!1,2194377500),model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}}),s("div",e._l(e.list.rightBtnStatusList,(function(t,r){return s("span",{key:r,class:t.className,on:{click:function(s){return s.stopPropagation(),e.GoTo(t,e.list)}}},[e._v(e._s(t.name))])})),0)],1):e._e()},a=[],i=(s(7658),{props:["type","source","list"],data(){return{actions:[],showPopover:!1}},methods:{onSelect(e){console.log(e.type),e.type&&this.$router.push({path:"/"+e.type})},actionsType(){},GoTo(e){this.$emit("btnSkip",e)}},created(){this.$set(this.actions,0,this.list.btnStatusList)}}),n=i,o=s(3736),d=(0,o.Z)(n,r,a,!1,null,null,null),l=d.exports},5012:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.item?s("div",{staticClass:"orderDetails"},[s("div",{staticClass:"orderStatus"},[s("div",{staticClass:"orderStatusBox"},[s("div",[e._v(e._s(e.handleOrderStatus(e.item).detailsName))]),""!=e.handleOrderStatus(e.item).detailsHint?s("div",["obligation"==e.handleOrderStatus(e.item).type?s("van-count-down",{staticStyle:{"font-size":"14px",color:"rgba(255, 255, 255, .7)","font-weight":"400"},attrs:{time:new Date(e.handleOrderStatus(e.item).detailsHint)-new Date},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.hours+"时"+t.minutes+"分后自动关闭")+" ")]}}],null,!1,2384927166)}):s("span",{staticStyle:{"font-size":"14px",color:"rgba(255, 255, 255, .7)","font-weight":"400"}},[e._v(e._s(e.handleOrderStatus(e.item).detailsHint))])],1):e._e()])]),s("div",{staticClass:"orderDetailsBox"},[e.item.orderItems[0].orderRecvInfos?s("order-address",{attrs:{item:e.item},on:{Address:e.Address}}):e._e(),s("orderDetailsGoods",{attrs:{item:e.item}}),s("order-details-message",{ref:"orderDetailsMessage",attrs:{type:e.type},on:{queryAepOrderDetailInfo:e.queryAepOrderDetailInfo}})],1),s("order-tab",{attrs:{type:e.type,source:"Details",list:e.handleOrderStatus(e.item)},on:{btnSkip:e.btnSkip}})],1):e._e()},a=[],i=(s(7658),s(4934)),n=s(5045),o=s(4185),d=s(6478),l=s(2980),u={data(){return{type:1,handleOrderStatus:l.h,orderStatus:[],item:null}},methods:{queryAepOrderDetailInfo(e,t){let s={custOrderId:e,tenantId:t};this.$api.queryAepOrderDetailInfo(s).then((e=>{"core.0000"==e.code&&(this.item=e.data,setTimeout((()=>{this.$refs.orderDetailsMessage.Details(e.data)}),100))}))},btnSkip(e){"handleAddress"==e.type?this.handleAddress():"logisticsInfo"==e.type&&this.$router.push({path:"/logisticsInfo",query:{custOrderId:this.item.custOrderId,tenantId:this.item.tenantId,orderItemId:this.item.orderItemId}})},Address(e){this.item.orderItems[0].orderRecvInfos[0].receiverName=e.contacter,this.item.orderItems[0].orderRecvInfos[0].recvPhone=e.contactPhone,this.item.orderItems[0].orderRecvInfos[0].recvAddress=e.addrDetail}},created(){this.$nextTick((()=>{this.queryAepOrderDetailInfo(this.$route.query.custOrderId,this.$route.query.tenantId)}))},components:{orderTab:i.Z,orderDetailsMessage:n.Z,orderDetailsGoods:o.Z,orderAddress:d.Z}},c=u,m=s(3736),p=(0,m.Z)(c,r,a,!1,null,null,null),h=p.exports},2980:function(e,t,s){s.d(t,{B:function(){return p},h:function(){return m}});const r=["99","100","80"],a=["101","80","80"],i=["108","107","96","98","79"],n=["112","83","81"],o=["97","84","94","95","93","89","82"],d=["90","91","92","88"],l=[],u=["105"],c=["102"];function m(e,t=-1,s=0){let m=e.statusCd.toString();if(_.includes(r,m))return{orderName:"待付款",orderCode:r,btnStatusList:[{text:"取消订单",code:0}],rightBtnStatusList:[{name:"修改地址",className:"bt1",type:"handleAddress"},{name:"继续付款",className:"bt2"}],type:"obligation",detailsName:"等待买家付款",detailsHint:e.orderItems?e.orderItems[0].orderProdInst.expTime:""};if(_.includes(i,m)){let e;switch(m){case"108":e="交易失败";break;case"107":e="用户取消订单";break;case"96":e="已撤单";break;case"98":e="已清理";break;case"79":e="拒接申请";break}return{orderName:"订单关闭",orderCode:i,btnStatusList:[{text:"删除订单",code:1}],rightBtnStatusList:[{name:"再次购买",className:"bt2"}],detailsName:"订单关闭",detailsHint:e}}if(_.includes(n,m))return{orderName:"退款中",orderCode:n,btnStatusList:[],rightBtnStatusList:[{name:"取消退款申请",className:"bt1"}],detailsName:"退款中",detailsHint:"退款审核中"};if(_.includes(o,m))return{orderName:"退款中（不退货）",orderCode:o,btnStatusList:[],rightBtnStatusList:[{name:"取消退款申请",className:"bt1"}],detailsName:"退款中",detailsHint:"退款审核中"};if(_.includes(d,m))return{orderName:"退货中",orderCode:d,btnStatusList:[],rightBtnStatusList:[],detailsName:"退货中",detailsHint:""};if(_.includes(l,m))return{orderName:"换货中",orderCode:l,btnStatusList:[],rightBtnStatusList:[],detailsName:"",detailsHint:""};if(_.includes(u,m))return{orderName:"交易成功",orderCode:u,btnStatusList:[{text:"申请售后",code:2,type:"afterSale"},{text:"删除订单",code:1}],rightBtnStatusList:[{name:"再次购买",className:"bt2"}],detailsName:"交易成功",detailsHint:""};if(_.includes(c,m)){let t,s,r,a=e.orderItems?e.orderItems[0].OrderDeliverInfos:e.OrderDeliverInfos;return a?(t=[{name:"查看物流",className:"bt1",type:"logisticsInfo"},{name:"确认收货",className:"bt2"}],s="待收货",r=e.orderDeliverInfos[0].logisticsName+"|"+e.orderDeliverInfos[0].traceNo):(t=[{name:"再次购买",className:"bt2"}],s="施工中",r=""),{orderName:"已发货",orderCode:c,btnStatusList:[{text:"申请售后",code:2,type:"afterSale"}],rightBtnStatusList:t,detailsName:s,detailsHint:r}}return _.includes(a,m)?{orderName:"待发货",orderCode:a,btnStatusList:[{text:"申请退款",code:3}],rightBtnStatusList:[{name:"修改地址",className:"bt1"}],detailsName:"待发货",detailsHint:""}:void 0}function p(){return[{value:"0",name:"全部",orderCode:[...r,...c,...u]},{value:"1",name:"待付款",orderCode:r},{value:"2",name:"已发货",orderCode:c},{value:"3",name:"已完成",orderCode:u}]}}}]);