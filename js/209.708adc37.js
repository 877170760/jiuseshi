"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[209],{5592:function(t,s,e){e.d(s,{Z:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sortBox",style:{height:t.height+"px"}},t._l(t.sortList,(function(s,i){return e("div",{key:i,staticClass:"sort",class:t.active==s.id?"blue":"",on:{click:function(e){return t.sortActive(s.id)}}},[t._v(" "+t._s(s.name)+" "),s.icon?e("div",{staticClass:"icon"},[e("span",{staticClass:"top",style:"asc"==s.type?" border-bottom-color:  #0975FF;":""}),e("span",{staticClass:"bottom",style:"desc"==s.type?" border-top-color:  #0975FF;":""})]):t._e()])})),0)},a=[],r={props:{sortList:{type:Array,default:()=>{}},height:{type:String,default:"auto"}},data(){return{active:0,item:{}}},methods:{sortActive(t){if(0==this.active&&0==t)return;this.active=t;let s=this.sortList.findIndex((s=>s.id===t)),e=this.sortList[s].type;this.sortList[s].type="asc"==e?"desc":"asc",0==t?this.item={}:this.$set(this.item,t,this.sortList[s].type),this.$emit("sortItem",this.item)}}},c=r,o=e(3736),n=(0,o.Z)(c,i,a,!1,null,null,null),d=n.exports},3275:function(t,s,e){e.d(s,{Z:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card",on:{click:function(s){return t.details(t.cardObj)}}},[e("img",{directives:[{name:"real-img",rawName:"v-real-img",value:t.cardObj.picUrl,expression:"cardObj.picUrl"}],staticClass:"card-img",attrs:{alt:""}}),e("div",{staticClass:"right"},[e("div",{staticClass:"card-title"},[t._v(t._s(t.cardObj.prodName))]),e("div",{staticClass:"price"},[e("span",{staticClass:"size"},[t._v(t._s(t.price))])]),e("div",{staticClass:"flex"},[t.cardObj.prodSourceName?e("div",{staticClass:"blue"},[t._v(t._s(t.cardObj.prodSourceName))]):t._e(),t.cardObj.prodTypeName?e("div",{staticClass:"red"},[t._v(t._s(t.cardObj.prodTypeName))]):t._e()])])])},a=[],r={name:"labelCard",props:{cardObj:{type:Object,default:()=>{}}},data(){return{}},mounted(){},computed:{price(){return this.cardObj.highestPrice&&this.cardObj.lowestPrice?`¥${this.handlePriceData(this.cardObj.lowestPrice)}-¥${this.handlePriceData(this.cardObj.highestPrice)}`:this.cardObj.highestPrice?`¥${this.handlePriceData(this.cardObj.highestPrice)}`:this.cardObj.lowestPrice?`¥${this.handlePriceData(this.cardObj.lowestPrice)}起`:"未上架"}},methods:{handlePriceData(t){return(t/100).toFixed(1)},details(t){this.$emit("goDetails",t)}}},c=r,o=e(3736),n=(0,o.Z)(c,i,a,!1,null,"4433ad52",null),d=n.exports},1568:function(t,s,e){e.d(s,{Z:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search-panel"},[e("div",{staticClass:"search-input"},[e("van-field",{attrs:{placeholder:"搜索"},model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}}),e("svg-icon",{attrs:{"icon-class":"icon-search"}}),e("div",{staticClass:"search-btn",on:{click:t.onSearchBtnClick}},[t._v("搜索")])],1)])},a=[],r={name:"searchPanel",data(){return{keyword:""}},mounted(){this.$nextTick((()=>{}))},methods:{changeKeyword(t){this.keyword=t},onSearchBtnClick(){this.$emit("onSearchBtnClickCb",this.keyword)}}},c=r,o=e(3736),n=(0,o.Z)(c,i,a,!1,null,"62c98dbc",null),d=n.exports},6209:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search-result"},[e("search-panel",{ref:"searchPanel",staticClass:"index-1",on:{onSearchBtnClickCb:t.onSearchBtnClickCb}}),e("div",{staticClass:"search-body"},[t.list.length?e("div",{staticClass:"tab"},[e("sort",{ref:"sort",attrs:{sortList:t.sortList,height:"44"},on:{sortItem:t.sortItem}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("div",{staticClass:"card-wrap"},t._l(t.list,(function(s,i){return e("label-card",{key:i,attrs:{cardObj:s},on:{goDetails:t.goDetails}})})),1)])],1):e("div",{staticClass:"undone-box"},[e("svg-icon",{staticClass:"icon-undone",attrs:{"icon-class":"icon-undone"}}),e("p",{staticClass:"ft14 mt4"},[t._v("暂无结果")])],1)])],1)},a=[],r=(e(7658),e(1568)),c=e(3275),o=e(5592),n={name:"searchResult",components:{SearchPanel:r.Z,LabelCard:c.Z,sort:o.Z},data(){return{list:[],keyword:"",pageIndex:1,loading:!1,finished:!1,total:"",sortList:[{name:"综合排序",icon:!1,id:0,type:""},{name:"上架时间",icon:!0,id:"CREATEDATE",type:""},{name:"价格",icon:!0,id:"PRICE",type:""}],orderBys:{}}},mounted(){this.$nextTick((()=>{this.keyword=this.$route.query.keyword||"",this.$refs.searchPanel.changeKeyword(this.keyword),window.scrollTo(0,0),this.loadData()}))},methods:{onLoad(){this.pageIndex++,this.getProductList()},loadData(){this.pageIndex=1,this.loading=!0,this.finished=!1,this.getProductList()},onSearchBtnClickCb(t){window.scrollTo(0,0),this.loading=!0,this.finished=!1,this.total=0,this.keyword=t,0==this.$refs.sort.active?(this.pageIndex=1,this.getProductList()):this.$refs.sort.sortActive(0)},goDetails(t){this.$router.push({path:"/productDetails",query:{...t}})},sortItem(t){0==this.$refs.sort.active&&this.sortList.find((t=>t.type="")),this.orderBys=t,this.loadData()},getProductList(){let t={bgCatIds:[],highestPrice:"",keyWord:this.keyword,landId:0,lowestPrice:"",orderBys:this.orderBys,pageNow:this.pageIndex,pageSize:6};this.loading=!0,this.$api.productList(t).then((t=>{"core.0000"==t.code?t.data&&(1==this.pageIndex?this.list=t.data.list:this.list=_.concat(this.list,t.data.list),this.total=t.data.total,this.list.length>=t.data.total?this.finished=!0:this.finished=!1):this.$toast.fail(t.reason)})).catch((t=>{})).finally((()=>{this.loading=!1}))}}},d=n,l=e(3736),h=(0,l.Z)(d,i,a,!1,null,"8eaea172",null),u=h.exports}}]);