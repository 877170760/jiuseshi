"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[311],{9059:function(t,e,s){s.d(e,{Z:function(){return l}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-send-to"},[s("van-popup",{style:{height:"86%"},attrs:{round:"",position:"bottom"},on:{open:t.initAddress},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[s("div",{staticClass:"title-box"},[t._v(" 请选择收货地址 "),s("div",{staticClass:"svg-box",on:{click:t.onClose}},[s("svg-icon",{staticClass:"icon-close",attrs:{"icon-class":"icon-close"}})],1)]),s("div",{staticClass:"address-body"},t._l(t.addressList,(function(e){return s("div",{key:e.addrId,staticClass:"address-item",on:{click:function(s){return t.onAddress(e)}}},[s("div",{staticClass:"pr12"},[s("svg-icon",{staticClass:"svg-checked ",attrs:{"icon-class":e.addrId==t.addressId?"icon-checked":"icon-location"}})],1),s("div",[s("div",{staticClass:"ft14"},[t._v(" "+t._s(e.addrDetail)+" ")]),s("div",{staticClass:"text-box"},[s("span",{staticClass:"text"},[t._v(t._s(e.contacter))]),s("span",{staticClass:"pl10"},[t._v(t._s(e.contactPhone))])])])])})),0),s("div",{staticClass:"footer-body",on:{click:function(e){return t.$router.push("/newAddress")}}},[s("div",{staticClass:"btn-box"},[s("div",{staticClass:"btn"},[t._v("使用其他收货地址")])])])])],1)},i=[],r={name:"productSendTo",data(){return{showPopup:!1,radio:!0,addressList:[],query:{tenantId:10037279,pageSize:10,pageNow:1},addressId:""}},methods:{initAddress(){this.$api.qryCustAddrListInfoByTenantId({...this.query}).then((t=>{"core.0000"==t.code?this.addressList=t.data.list:this.$toast(t.msg)})).catch((t=>{this.$toast(t.msg)}))},onAddress(t){this.addressId=t.addrId,this.$emit("onAddress",t),this.showPopup=!1},initChangeSelectAddressId(t){this.addressId=t},onClose(){this.showPopup=!1}}},o=r,n=s(3736),d=(0,n.Z)(o,a,i,!1,null,"e3948ea6",null),l=d.exports},4934:function(t,e,s){s.d(e,{Z:function(){return l}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=t.list.rightBtnStatusList.length||0!=t.list.btnStatusList.length?s("div",{staticClass:"tab",style:"list"==t.source?"position: unset;":"padding: 0 10px;box-sizing: border-box;"},[s("van-popover",{attrs:{placement:"top-start",trigger:"click",actions:t.list.btnStatusList},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[s("span",{directives:[{name:"show",rawName:"v-show",value:t.list.btnStatusList.length>0,expression:"list.btnStatusList.length > 0"}]},[t._v("更多")])]},proxy:!0}],null,!1,2194377500),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}}),s("div",t._l(t.list.rightBtnStatusList,(function(e,a){return s("span",{key:a,class:e.className,on:{click:function(s){return s.stopPropagation(),t.GoTo(e,t.list)}}},[t._v(t._s(e.name))])})),0)],1):t._e()},i=[],r=(s(7658),{props:["type","source","list"],data(){return{actions:[],showPopover:!1}},methods:{onSelect(t){console.log(t.type),t.type&&this.$router.push({path:"/"+t.type})},actionsType(){},GoTo(t){this.$emit("btnSkip",t)}},created(){this.$set(this.actions,0,this.list.btnStatusList)}}),o=r,n=s(3736),d=(0,n.Z)(o,a,i,!1,null,null,null),l=d.exports},6311:function(t,e,s){s.r(e),s.d(e,{default:function(){return N}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-order"},[s("div",{staticClass:"wing-tabs"},[s("van-tabs",{on:{change:t.tabChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabsList,(function(e){return s("van-tab",{key:e.value,attrs:{title:e.name,name:e.value}},[[s("van-pull-refresh",{on:{refresh:t.loadData},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.queryAepOrderList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orderList,(function(e,a){return s("orderInfo",{key:a,attrs:{item:e},on:{orderDetails:t.orderDetails}})})),1)],1)]],2)})),1)],1)])},i=[],r=(s(7658),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-info"},[s("div",{staticClass:"list-box"},[s("div",{staticClass:"oredr-goods"},[s("div",{on:{click:function(e){return t.goOrderDetails(t.item)}}},[s("div",{staticClass:"company-name"},[s("div",{staticClass:"name-box"},[s("p",{staticClass:"ft15 fw-600"},[t._v(t._s(t.item.sellerName))]),s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"icon-right-arrow"}})],1),s("p",{staticClass:"blue ft14"},[t._v(t._s(t.handleOrderStatus(t.item).orderName))])]),s("div",{staticClass:"goods-box"},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:t.item.imgUrl,expression:"item.imgUrl"}],staticClass:"goods-img"}),s("div",{staticClass:"goods-text-box"},[s("div",{staticClass:"goods-title ell"},[t._v(t._s(t.item.prodName))]),t.item.Detail&&t.item.Detail.orderItems[0].orderProdInst.catName?s("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(t.item.Detail.orderItems[0].orderProdInst.catName))]):t._e(),t.item.Detail&&t.item.Detail.orderItems[0].orderProdInst.prodTypeName?s("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(t.item.Detail.orderItems[0].orderProdInst.prodTypeName))]):t._e(),s("div",{staticClass:"price"},[s("span",[t._v("￥")]),s("span",{staticClass:"num"},[t._v(t._s(t.item.totalFee))])])],1)]),t.item.Detail?s("div",[t.item.Detail.orderItems[0].orderProdInst.orderProdResInsts&&t.item.Detail.orderItems[0].orderProdInst.orderProdResInsts.length>0?s("div",t._l(t.item.Detail.orderItems[0].orderProdInst.orderProdResInsts,(function(e,a){return s("div",{key:a,staticClass:"goodes-remark"},[s("span",{staticClass:"nowrap ell"},[t._v(" "+t._s(e.name)+" ")]),s("span",[t._v("x"+t._s(e.quantity))])])})),0):t._e(),t.item.Detail.orderItems[0].orderProdInst.orderProdInstAttrs&&t.item.Detail.orderItems[0].orderProdInst.orderProdInstAttrs.length>0?s("div",{staticClass:"goods-serve"},t._l(t.item.Detail.orderItems[0].orderProdInst.orderProdInstAttrs,(function(e,a){return s("p",{key:a},[t._v(" 已选："+t._s(e.attrName)+","+t._s(e.attrValueName)+" ")])})),0):t._e()]):t._e(),s("div",{staticClass:"play-box"},[0!=t.item.discountFee?s("div",{staticStyle:{color:"red"}},[s("span",{staticClass:"ft15 fw-600"},[t._v("优惠")]),s("span",{staticClass:"ft12 plr3 pt2"},[t._v("￥")]),s("span",{staticClass:"ft17 fw-600"},[t._v(" "+t._s(t.item.discountFee||0))])]):t._e(),s("div",[s("span",{staticClass:"ft15 fw-600"},[t._v("需付款")]),s("span",{staticClass:"ft12 plr3 pt2"},[t._v("￥")]),s("span",{staticClass:"ft17 fw-600"},[t._v(t._s(t.item.payAmount))])])])]),s("order-tab",{attrs:{type:0,source:"list",list:t.handleOrderStatus(t.item)},on:{btnSkip:t.btnSkip}}),s("productSendTo",{ref:"sendToRef",on:{onAddress:t.onAddress}})],1)])])}),o=[],n=s(4934),d=s(9059),l=s(2980),c={props:["item"],data(){return{orderList:[],handleOrderStatus:l.h}},methods:{onSelect(t){console.log(t)},goOrderDetails(t){this.$emit("orderDetails",t)},btnSkip(t){"handleAddress"==t.type?this.handleAddress():"logisticsInfo"==t.type&&this.$router.push({path:"/logisticsInfo",query:{custOrderId:this.item.custOrderId,tenantId:this.item.tenantId,orderItemId:this.item.orderItemId}})},onAddress(t){},handleAddress(){this.$refs.sendToRef.showPopup=!0}},created(){},components:{orderTab:n.Z,productSendTo:d.Z}},u=c,p=s(3736),m=(0,p.Z)(u,r,o,!1,null,"c04d655e",null),h=m.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-info "},[a("div",{staticClass:"list-box"},[a("div",{staticClass:"oredr-goods"},[a("div",{staticClass:"company-name"},[a("van-checkbox",{attrs:{"icon-size":"16px"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[a("div",{staticClass:"name-box"},[a("p",{staticClass:"ft15 fw-600"},[t._v("天翼物联科技有限公司1")]),a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"icon-right-arrow"}})],1)]),a("p",{staticClass:"blue ft14"},[t._v("待付款")])],1),a("div",{staticClass:"goods-box"},[a("img",{staticClass:"goods-img",attrs:{src:s(3981)}}),a("div",{staticClass:"goods-text-box"},[a("div",{staticClass:"goods-title ell"},[t._v(" 云芯科技学生智能电话手表 D12 支持智能定位走失提醒 超长续航 支持4G全 ")]),a("van-tag",{attrs:{plain:"",type:"primary"}},[t._v("智慧工业-能耗监控")]),a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("应用+终端")]),t._m(0)],1)]),t._m(1),a("div",{staticClass:"goods-serve"},[t._v(" 已选：3年服务周期，粤康码 ")]),t._m(2),a("div",{staticClass:"flex-between mt18"},[a("van-popover",{attrs:{trigger:"click",actions:t.actions,placement:"top-start"},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[a("span",{staticClass:"ft14 gray"},[t._v("更多")])]},proxy:!0}]),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}}),t._m(3)],1)])]),a("div",{staticClass:"settle-accounts"},[a("div",{staticClass:"accounts-box"},[a("van-checkbox",{attrs:{"icon-size":"16px"},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")]),t._m(4),a("div",{staticClass:"accounts-btn"},[t._v("结算")])],1)])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"price"},[s("span",[t._v("￥")]),s("span",{staticClass:"num"},[t._v("399.00")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodes-remark"},[s("span",{staticClass:"nowrap ell"},[t._v(" 家用可燃气体探测器_JR-2 323 哈哈哈哈哈哈哈哈哈哈哈哈")]),s("span",[t._v("x1")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-box"},[s("span",{staticClass:"ft15 fw-600"},[t._v("需付款")]),s("span",{staticClass:"ft12 plr3 pt2"},[t._v("￥")]),s("span",{staticClass:"ft17 fw-600"},[t._v("399.00")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex"},[s("div",{staticClass:"btn-box btn-gray mr9"},[t._v("修改地址")]),s("div",{staticClass:"btn-box btn-blue"},[t._v("继续付款")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",{staticClass:"deep-gray"},[t._v("总计:")]),s("span",{staticClass:"red plr3"},[t._v("￥")]),s("span",{staticClass:"red ft17"},[t._v("9999900.00")])])}],g={data(){return{showPopover:!1,actions:[{text:"取消订单"}],orderList:[{companyName:"天翼物联科技有限公司",state:0,imgUrl:s(3981),productDetails:"云芯科技学生智能电话手表 D12 支持智能定位走失提醒 超长续航 支持4G全",price:399,totalPrice:399,type:"家用可燃气体探测器_JR-2 323,家用可燃气体探测器_JR-2 999",attribute:"3年服务周期，粤康码"},{companyName:"天翼物联科技有限公司",state:1,imgUrl:s(3981),productDetails:"云芯科技学生智能电话手表 D12 支持智能定位走失提醒 超长续航 支持4G全",price:399,totalPrice:399,type:"家用可燃气体探测器_JR-2 323,家用可燃气体探测器_JR-2 999",attribute:"3年服务周期，粤康码"},{companyName:"天翼物联科技有限公司",state:1,imgUrl:s(3981),productDetails:"云芯科技学生智能电话手表 D12 支持智能定位走失提醒 超长续航 支持4G全",price:399,totalPrice:399,type:"家用可燃气体探测器_JR-2 323,家用可燃气体探测器_JR-2 999",attribute:"3年服务周期，粤康码"}],checked:!1,checkedAll:!1}},methods:{onSelect(t){console.log(t)}}},_=g,C=(0,p.Z)(_,v,f,!1,null,"42c2ad48",null),b=C.exports,I={components:{orderInfo:h,orderObligation:b},data(){return{active:"all",tabsList:(0,l.B)(),orderList:[],loading:!1,finished:!1,refreshing:!1,pageNow:1,pageSize:10,statusCds:(0,l.B)()[0].orderCode}},created(){},mounted(){this.$nextTick((()=>{this.loadData()}))},methods:{loadData(){this.pageSize=10,this.pageNow=1,this.loading=!1,this.finished=!1,this.refreshing=!0,this.queryAepOrderList()},tabChange(t){this.orderList=[],this.statusCds=(0,l.B)()[t].orderCode,this.loadData()},queryAepOrderList(){let t={custOrderNbr:"",orderItemNbr:"",statusCd:"",prodName:"",prodId:null,sellerId:null,startAcceptDate:"",endAcceptDate:"",tenantId:null,orderSrc:"online",pageSize:this.pageSize,pageNow:this.pageNow,statusCds:this.statusCds};this.loading=!0,this.$api.queryAepOrderList(t).then((t=>{if("core.0000"==t.code){if(this.refreshing&&(this.orderList=[]),!t.data)return this.loading=!1,void(this.finished=!0);this.orderList=[...this.orderList,...t.data.list],this.loading=!1,this.orderList.length>=t.data.total&&(this.finished=!0);for(let e=0;e<t.data.list.length;e++)this.queryAepOrderDetailInfo(t.data.list[e].custOrderId,t.data.list[e].tenantId);this.pageNow++}else this.loading=!1})).catch((t=>{this.loading=!1,this.finished=!0,this.$toast("服务器错误")})).finally((()=>{this.refreshing=!1}))},queryAepOrderDetailInfo(t,e){let s={custOrderId:t,tenantId:e};this.$api.queryAepOrderDetailInfo(s).then((e=>{if("core.0000"==e.code){if(!e.data)return;let s=this.orderList.findIndex((e=>e.custOrderId===t));this.$set(this.orderList[s],"Detail",e.data)}}))},orderDetails(t){this.$router.push({path:"/orderDetails",query:{custOrderId:t.custOrderId,tenantId:t.tenantId}})}}},y=I,x=(0,p.Z)(y,a,i,!1,null,"f5dafea8",null),N=x.exports},2980:function(t,e,s){s.d(e,{B:function(){return m},h:function(){return p}});const a=["99","100","80"],i=["101","80","80"],r=["108","107","96","98","79"],o=["112","83","81"],n=["97","84","94","95","93","89","82"],d=["90","91","92","88"],l=[],c=["105"],u=["102"];function p(t,e=-1,s=0){let p=t.statusCd.toString();if(_.includes(a,p))return{orderName:"待付款",orderCode:a,btnStatusList:[{text:"取消订单",code:0}],rightBtnStatusList:[{name:"修改地址",className:"bt1",type:"handleAddress"},{name:"继续付款",className:"bt2"}],type:"obligation",detailsName:"等待买家付款",detailsHint:t.orderItems?t.orderItems[0].orderProdInst.expTime:""};if(_.includes(r,p)){let t;switch(p){case"108":t="交易失败";break;case"107":t="用户取消订单";break;case"96":t="已撤单";break;case"98":t="已清理";break;case"79":t="拒接申请";break}return{orderName:"订单关闭",orderCode:r,btnStatusList:[{text:"删除订单",code:1}],rightBtnStatusList:[{name:"再次购买",className:"bt2"}],detailsName:"订单关闭",detailsHint:t}}if(_.includes(o,p))return{orderName:"退款中",orderCode:o,btnStatusList:[],rightBtnStatusList:[{name:"取消退款申请",className:"bt1"}],detailsName:"退款中",detailsHint:"退款审核中"};if(_.includes(n,p))return{orderName:"退款中（不退货）",orderCode:n,btnStatusList:[],rightBtnStatusList:[{name:"取消退款申请",className:"bt1"}],detailsName:"退款中",detailsHint:"退款审核中"};if(_.includes(d,p))return{orderName:"退货中",orderCode:d,btnStatusList:[],rightBtnStatusList:[],detailsName:"退货中",detailsHint:""};if(_.includes(l,p))return{orderName:"换货中",orderCode:l,btnStatusList:[],rightBtnStatusList:[],detailsName:"",detailsHint:""};if(_.includes(c,p))return{orderName:"交易成功",orderCode:c,btnStatusList:[{text:"申请售后",code:2,type:"afterSale"},{text:"删除订单",code:1}],rightBtnStatusList:[{name:"再次购买",className:"bt2"}],detailsName:"交易成功",detailsHint:""};if(_.includes(u,p)){let e,s,a,i=t.orderItems?t.orderItems[0].OrderDeliverInfos:t.OrderDeliverInfos;return i?(e=[{name:"查看物流",className:"bt1",type:"logisticsInfo"},{name:"确认收货",className:"bt2"}],s="待收货",a=t.orderDeliverInfos[0].logisticsName+"|"+t.orderDeliverInfos[0].traceNo):(e=[{name:"再次购买",className:"bt2"}],s="施工中",a=""),{orderName:"已发货",orderCode:u,btnStatusList:[{text:"申请售后",code:2,type:"afterSale"}],rightBtnStatusList:e,detailsName:s,detailsHint:a}}return _.includes(i,p)?{orderName:"待发货",orderCode:i,btnStatusList:[{text:"申请退款",code:3}],rightBtnStatusList:[{name:"修改地址",className:"bt1"}],detailsName:"待发货",detailsHint:""}:void 0}function m(){return[{value:"0",name:"全部",orderCode:[...a,...u,...c]},{value:"1",name:"待付款",orderCode:a},{value:"2",name:"已发货",orderCode:u},{value:"3",name:"已完成",orderCode:c}]}},3981:function(t,e,s){t.exports=s.p+"img/details-img.5a071e50.png"}}]);