"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[914],{914:function(t,e,s){s.r(e),s.d(e,{default:function(){return o}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shipping-address"},[s("div",{staticClass:"address-body"},[s("van-pull-refresh",{staticClass:"list",on:{refresh:t.onRefresh},model:{value:t.refresh,callback:function(e){t.refresh=e},expression:"refresh"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return s("van-cell",{key:a,staticClass:"list-box ovh mb9 flex-column",attrs:{clickable:""},scopedSlots:t._u([{key:"icon",fn:function(){return[s("div",{staticClass:"title-box"},[s("p",[s("span",{staticClass:"ft15 fw-600 mr6"},[t._v(t._s(e.contacter))]),s("span",{staticClass:"gray"},[t._v(t._s(e.contactPhone))])]),s("p",{staticClass:"ft14 mt4 lh-18"},[t._v(t._s(e.addrDetail))])]),s("div",{staticClass:"ptb12 flex-between"},[s("van-checkbox",{attrs:{"icon-size":"16"},on:{change:function(s){return t.checkoutDefault(e)}},model:{value:e.defaultRecv,callback:function(s){t.$set(e,"defaultRecv",s)},expression:"item.defaultRecv"}},[1==e.defaultRecv?s("span",{staticClass:"deep-gray ft13"},[t._v("已设为默认")]):s("span",[t._v("默认地址")])]),s("div",{staticClass:"ft13"},[s("span",{staticClass:"blue mr24",on:{click:function(s){return t.goPage("UPD",e)}}},[t._v("编辑")]),s("span",{staticClass:"deep-gray",on:{click:function(s){return t.handleDle(e)}}},[t._v("删除")])])],1)]},proxy:!0}],null,!0)})})),1)],1)],1),s("div",{staticClass:"footer-body",on:{click:function(e){return t.goPage("ADD")}}},[t._m(0)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-box"},[s("div",{staticClass:"btn"},[t._v("添加收货地址")])])}],n=(s(7658),{name:"shippingAddress",data(){return{list:[],loading:!1,finished:!1,refresh:!1,query:{tenantId:10037279,pageSize:10,pageNow:1}}},mounted(){},methods:{onLoad(){this.loading=!0,this.finished=!1,this.initAddress()},onRefresh(){this.list=[],this.query.pageNow=1,this.initAddress(),this.refresh=!1},initAddress(){this.$api.qryCustAddrListInfoByTenantId({...this.query}).then((t=>{if("core.0000"==t.code){this.query.pageNow++;let e=t.data.total;this.list=[...this.list,...t.data.list]||[],this.list.length>=e&&(this.finished=!0),this.loading=!1}else this.$toast(t.msg)})).catch((t=>{this.$toast(t.msg)})).finally((()=>{this.refresh=!1}))},goPage(t,e={}){this.$router.push({path:"/newAddress",query:{type:t,...e}})},handleDle(t){let e={addrId:t.addrId,tenantId:t.tenantId,provId:t.provId,cityId:t.cityId,countyId:t.countyId,contacter:t.contacter,contactPhone:t.contactPhone,addrDetail:t.addrDetail,operType:"DEL",defaultRecv:t.defaultRecv,defaultFix:t.defaultFix};this.operation(e)},operation(t){this.$api.managerCustAddr(t).then((t=>{"core.0000"==t.code?(this.$toast(t.reason),this.onRefresh()):this.$toast(t.reason)})).catch((t=>{this.$toast(t.msg)}))},async checkoutDefault(t){await this.resetDefault(t.addrId);let e={defaultRecv:t.defaultRecv?1:0,operType:"UPD",tenantId:t.tenantId,addrId:t.addrId,shardingId:t.shardingId};await this.operation(e)},resetDefault(t){this.list.map((e=>{if(1==e.defaultRecv&&e.addrId!=t){console.log(e.addrId,"item.addrId");let t={defaultRecv:0,operType:"UPD",tenantId:e.tenantId,addrId:e.addrId,shardingId:e.shardingId};this.$api.managerCustAddr(t).catch((t=>{this.$toast(t.msg)}))}}))}}}),d=n,r=s(3736),l=(0,r.Z)(d,a,i,!1,null,"0ea3079e",null),o=l.exports}}]);