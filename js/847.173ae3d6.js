"use strict";(self["webpackChunkctwing_shop_h5"]=self["webpackChunkctwing_shop_h5"]||[]).push([[847],{9059:function(t,s,e){e.d(s,{Z:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-send-to"},[e("van-popup",{style:{height:"86%"},attrs:{round:"",position:"bottom"},on:{open:t.initAddress},model:{value:t.showPopup,callback:function(s){t.showPopup=s},expression:"showPopup"}},[e("div",{staticClass:"title-box"},[t._v(" 请选择收货地址 "),e("div",{staticClass:"svg-box",on:{click:t.onClose}},[e("svg-icon",{staticClass:"icon-close",attrs:{"icon-class":"icon-close"}})],1)]),e("div",{staticClass:"address-body"},t._l(t.addressList,(function(s){return e("div",{key:s.addrId,staticClass:"address-item",on:{click:function(e){return t.onAddress(s)}}},[e("div",{staticClass:"pr12"},[e("svg-icon",{staticClass:"svg-checked ",attrs:{"icon-class":s.addrId==t.addressId?"icon-checked":"icon-location"}})],1),e("div",[e("div",{staticClass:"ft14"},[t._v(" "+t._s(s.addrDetail)+" ")]),e("div",{staticClass:"text-box"},[e("span",{staticClass:"text"},[t._v(t._s(s.contacter))]),e("span",{staticClass:"pl10"},[t._v(t._s(s.contactPhone))])])])])})),0),e("div",{staticClass:"footer-body",on:{click:function(s){return t.$router.push("/newAddress")}}},[e("div",{staticClass:"btn-box"},[e("div",{staticClass:"btn"},[t._v("使用其他收货地址")])])])])],1)},a=[],n={name:"productSendTo",data(){return{showPopup:!1,radio:!0,addressList:[],query:{tenantId:10037279,pageSize:10,pageNow:1},addressId:""}},methods:{initAddress(){this.$api.qryCustAddrListInfoByTenantId({...this.query}).then((t=>{"core.0000"==t.code?this.addressList=t.data.list:this.$toast(t.msg)})).catch((t=>{this.$toast(t.msg)}))},onAddress(t){this.addressId=t.addrId,this.$emit("onAddress",t),this.showPopup=!1},initChangeSelectAddressId(t){this.addressId=t},onClose(){this.showPopup=!1}}},l=n,o=e(3736),r=(0,o.Z)(l,i,a,!1,null,"e3948ea6",null),d=r.exports},4847:function(t,s,e){e.r(s),e.d(s,{default:function(){return N}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-details"},[e("div",{staticClass:"height-box"},[e("swipe",{attrs:{imgList:t.details.imgList}}),e("div",{staticClass:"info-body"},[e("div",{staticClass:"information"},[e("div",{staticClass:"list-box"},[e("div",{ref:"contentRef",staticClass:"flex-between"},[e("div",{staticClass:"flex"},[e("span",{staticClass:"red ft14"},[t._v("￥")]),e("span",{staticClass:"red ft23"},[t._v(t._s(t.handlePriceData(t.details.productBasic.highestPrice)||0))]),e("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.handlePriceData(t.details.productBasic.lowestPrice),expression:"handlePriceData(details.productBasic.lowestPrice) !=0"}],staticClass:"gray ft12 ml9 line"},[t._v("￥"+t._s(t.handlePriceData(t.details.productBasic.lowestPrice)))])]),e("div",[e("svg-icon",{staticClass:"icon pr15",attrs:{"icon-class":"icon-qrcode"}}),e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"icon-share"}})],1)]),e("p",{staticClass:"ft14 mt8"},[t._v(t._s(t.details.productBasic.prodName))]),e("div",{staticClass:"flex ptb3"},[e("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(t.details.productBasic.prodSourceName))]),e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(t.details.productBasic.prodTypeName))])],1),t.details.productBasic.prodBrief?e("Paragraph",{attrs:{content:t.details.productBasic.prodBrief,"max-lines":2,"content-width":t.paragraphWidth}}):t._e()],1),e("div",{staticClass:"list-box select-item mt9 "},[e("van-cell-group",[t._l(t.attributeList,(function(s,i){return e("div",{key:i},[s.selValues?e("van-field",{staticClass:"mb18",attrs:{label:s.itemName,"input-align":"right","right-icon":"arrow",placeholder:"选择",readonly:"ICTCOMBOBOX"==s.itemConclass},on:{click:function(e){return t.handlePopup(s)}},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}):t._e()],1)})),e("van-field",{staticClass:"mb18",attrs:{label:"产品","right-icon":"arrow",placeholder:"选择","input-align":"right",readonly:""},on:{click:function(s){return t.handlePopup()}},model:{value:t.productName,callback:function(s){t.productName=s},expression:"productName"}}),e("van-field",{attrs:{label:"送至","right-icon":"arrow",placeholder:"选择","input-align":"right",readonly:""},on:{click:t.handleAddress},model:{value:t.form.address,callback:function(s){t.$set(t.form,"address",s)},expression:"form.address"}})],2)],1),e("productMultiPopup",{ref:"productMultiRef",on:{closePopup:t.closePopup}}),e("productSinglePopup",{ref:"productSingleRef"}),e("productSendTo",{ref:"sendToRef",on:{onAddress:t.onAddress}})],1),e("descriptiveLabeling",{attrs:{prodMarketingInfoList:t.details.prodMarketingInfoList}})],1)],1),e("div",{staticClass:"footer"},[e("div",{class:t.isHasGoods?t.isChecked?"light-orange":"white-bg":"light-red"},[t.isHasGoods?e("div",{staticClass:"state-box flex-between deep-gray"},[e("p",{staticClass:"ft12 ell g-f2"},[e("span",[t._v(" "+t._s(t.isChecked&t.isHasGoods?"已选":"未选")+"：")]),t._v(t._s(t.form.period?t.form.period:"")+" "),t.form.period&&t.form.healthCode?e("span",[t._v("，")]):t._e(),t._v(t._s(t.form.healthCode?t.form.healthCode:"")),t.form.product&&t.form.healthCode?e("span",[t._v("，")]):t._e(),t._v(t._s(t.form.product?t.form.product:""))]),e("div",{staticClass:"g-f1 flex-end"},[t._v("总计: "),e("span",{staticClass:"red "},[t._v("￥")]),e("span",{staticClass:"ft17 red"},[t._v(t._s(t.price))])])]):e("div",{staticClass:"state-box col-center row-center red ft14"},[t._v("抱歉，此商品暂无存货")])]),e("div",{staticClass:"menu-box"},[e("div",{staticClass:"menu-left mr7"},[e("div",{staticClass:"menu-column"},[e("svg-icon",{staticClass:"svg-icon",attrs:{"icon-class":"icon-store"}}),e("span",{staticClass:"ft10"},[t._v("店铺")])],1),e("div",{staticClass:"menu-column"},[e("svg-icon",{staticClass:"svg-icon",attrs:{"icon-class":"icon-shopping-cart"}}),e("span",{staticClass:"ft10"},[t._v("购物车")]),e("div",{staticClass:"cart-num"},[t._v("12")])],1)]),e("div",{staticClass:"menu-right flex"},[e("div",{staticClass:"menu-btn blue mr6"},[t._v("加入购物车")]),e("div",{staticClass:"menu-btn bg-blue white",on:{click:t.submitBus}},[t._v("立即购买")])])])])])},a=[],n=(e(7658),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"swipe"},[e("van-swipe",{on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"custom-indicator "},[t._v(t._s(t.current+1)+"/"+t._s(t.swipeList.length))])]},proxy:!0}])},t._l(t.imgList,(function(t,s){return e("van-swipe-item",{key:s},[e("img",{directives:[{name:"real-img",rawName:"v-real-img",value:t.imgUrl,expression:"item.imgUrl"}],staticClass:"swipe-img",attrs:{alt:""}})])})),1)],1)}),l=[],o={name:"swipe",props:{imgList:{type:Array,default:()=>[]}},data(){return{current:0,swipeList:[{id:1,img:e(3981)},{id:2,img:e(7520)}]}},methods:{onChange(t){this.current=t}}},r=o,d=e(3736),c=(0,d.Z)(r,n,l,!1,null,"004c3b44",null),u=c.exports,p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"descriptive-labeling"},t._l(t.prodMarketingInfoList,(function(s,i){return e("div",{key:i,staticClass:"list-box mt9"},[e("p",{staticClass:"title"},[t._v(t._s(s.marketTypeName))]),e("div",{staticClass:"mt12 imgStley",domProps:{innerHTML:t._s(s.content)}})])})),0)},m=[],h={name:"descriptiveLabeling",props:{prodMarketingInfoList:{type:Array,default:()=>[]}}},v=h,f=(0,d.Z)(v,p,m,!1,null,"3ccd195e",null),g=f.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-popup"},[e("van-popup",{style:{height:"86%"},attrs:{round:"",position:"bottom"},model:{value:t.showMultiPopup,callback:function(s){t.showMultiPopup=s},expression:"showMultiPopup"}},[e("div",{staticClass:"tabs-item"},t._l(t.tabsList,(function(s){return e("div",{key:s.value,staticClass:" g-f1 tabs-box",class:t.active==s.value?"tabs-active":"",on:{click:function(e){t.active=s.value}}},[e("p",{staticClass:"ft17 fw-600"},[t._v(t._s(s.name))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:"type"==t.active,expression:"active=='type'"}],staticClass:"sidebar-body"},[e("van-tree-select",{attrs:{height:"calc(100% - 100px)",items:t.sidebarList,"main-active-index":t.activeKey},on:{"update:mainActiveIndex":function(s){t.activeKey=s},"update:main-active-index":function(s){t.activeKey=s}},scopedSlots:t._u([{key:"content",fn:function(){return[t.sidebarList[t.activeKey]?e("div",{staticClass:"right-content"},[e("div",{staticClass:"single-body"},t._l(t.sidebarList[t.activeKey].children,(function(s,i){return e("div",{key:i,staticClass:" ft14 mb20"},[s.srcEqptList?e("div",[e("div",{staticClass:"single-title mb10"},[t._v(t._s(s.text))]),t._l(s.srcEqptList,(function(s,i){return e("div",{key:i,staticClass:"flex-between mb10"},[e("div",{staticClass:"g-f1 mr6",class:s.quantity?"active":""},[e("p",[t._v(t._s(s.mktResName))])]),e("div",{staticClass:"flex-end"},[e("van-stepper",{attrs:{"disable-input":"","input-width":"50px",min:"0"},on:{change:function(s){return t.onPlusZero(t.activeKey)}},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"obj.quantity"}})],1)])}))],2):e("div",[e("div",{staticClass:"flex-between mb10"},[e("div",{staticClass:"g-f1 mr6",class:s.quantity?"active":""},[e("p",[t._v(t._s(s.itemName))])]),e("div",{staticClass:"flex-end"},[e("van-stepper",{attrs:{"disable-input":"",disabled:"ISTMUST"==s.itemSeltype,"input-width":"50px",max:s.isHeadType?1:99999,min:"0"},on:{change:function(s){return t.onPlusZero(t.activeKey)}},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"item.quantity"}})],1)])])])})),0)]):t._e()]},proxy:!0}])})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"property"==t.active,expression:"active=='property'"}],staticClass:"property-body"},t._l(t.pattrList,(function(s,i){return e("div",{key:i},[e("p",{staticClass:"gray pt15"},[t._v(t._s(s.itemName))]),"ICTEDIT"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-field",{attrs:{"label-width":"120px","input-align":"right",required:"ISTMUST"==s.itemSeltype,"error-message":"ISTMUST"==s.itemSeltype?s.value?"":"请输入"+s.itemName:"",placeholder:"请输入"+s.itemName,label:s.itemName},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e(),"ICTCOMBOBOX"==s.itemConclass||"ICTCOMBOBOXLESS"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},t._l(s.selValues,(function(i,a){return e("div",{key:a,staticClass:"select-box",class:i.selected?"blue-bg ":"gray-bg",on:{click:function(e){return t.handleSource(i,s.selValues)}}},[t._v(t._s(i.text))])})),0):t._e(),"ICTSPINEDIT"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-stepper",{model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e(),"ICTDATETIME"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-datetime-picker",{attrs:{type:"datetime",title:"选择完整时间"},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e(),"ICTDATE"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-datetime-picker",{attrs:{type:"date",title:"选择年月日"},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e(),"ICTTIME"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-datetime-picker",{attrs:{type:"time",title:"选择时间"},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e(),"ICTCHECKBOX"==s.itemConclass?e("div",{staticClass:"flex-warp pt15"},[e("van-checkbox",{attrs:{shape:"square"},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}})],1):t._e()])})),0),e("div",{staticClass:"footer-body"},["type"==t.active?e("div",[t.kind>0?e("div",{staticClass:"btn-top btn-has"},[e("div",[t._v("已选"+t._s(t.kind)+"种"+t._s(t.copies)+"件")])]):e("div",{staticClass:"btn-top btn-no"},[t._v(" 未选择 ")])]):t._e(),"property"==t.active?e("div",[t.attributeData.length>0?e("div",{staticClass:"btn-top btn-has ell"},[t._v("已选择 "),t._l(t.attributeData,(function(s,i){return e("span",{key:i,staticStyle:{"margin-left":"4px"}},[t._v(" "+t._s(s.text)+" ")])}))],2):e("div",{staticClass:"btn-top btn-no"},[t._v(" 未选择 ")])]):t._e(),e("div",{staticClass:"btn-bom"},[e("div",{staticClass:"btn-box",on:{click:t.submitFrom}},[t._v("确定")])])])])],1)},D=[],b={name:"productPopupMulti",data(){return{showMultiPopup:!1,active:"type",tabsList:[{name:"产品型号",value:"type",checkedList:[]},{name:"产品属性",value:"property",checkedList:[]}],activeKey:0,sidebarList:[],pattrList:[],attributeData:[],copies:0,kind:0,pattrSetVal:[],allArray:[],submitData:{busiInfoJson:{},orderHandlerJson:{},reqInfoJson:{IDREQ:{base_info:{"IDCUST.CTYUNID":null,"IDCUST.TENENTID":null,"IDCUST.TENENTNAME":null,"IDCUST.USERID":null,"IDREQ.CREATEDBY":null,"IDREQ.CREATEDORG":null,"IDREQ.CUSTORDERID":0,"IDREQ.ORDERSRC":null,"IDSYS.OPERATORTYPE":0,SERVICETYPEID:1,"IDSYS.SELLERID":"","IDSYS.CREATEBY":"10037279","IDSYS.TENANTID":"10037279","IDSYS.USERID":"10037269"},custorder_info:{"IDREQ.CUSTORDERID":null,"IDREQ.CUSTORDERNUMBER":null,"IDREQ.PAYMETHOD":null,"IDREQ.REMARK":null}}}}}},methods:{submitFrom(){let t=[],s=[],e=[],i=[];this.allArray.map((s=>t.push(s.itemDomain)));let a=Array.from(new Set(t)),n={IDSERV:{IDPATTR:[]}};a.map((t=>{n[t]={},this.allArray.map(((a,l)=>{t==a.itemDomain&&"IDEQPT"!=a.itemDomain&&"IDPATTR"!=a.itemDomain&&"IDSPROD"!=a.itemDomain?n[t][a.itemCode]=a.value:"IDEQPT"==a.itemDomain?s.push(a):"IDPATTR"==a.itemDomain?e.push(a):"IDSPROD"==a.itemDomain&&i.push(a)}))}));let l=this.uniqueFun(i,"itemId"),o=[],r=[];l.map((t=>{o.push(t.parentId)}));let d=Array.from(new Set(o));d.map((t=>{let s={operType:"ADD"};l.map((e=>{t==e.parentId&&("IDSPROD.NAME"===e.itemCode&&(s["IDSPROD.NAME"]=e.value),"IDSPROD.PRODSUBID"===e.itemCode&&(s["IDSPROD.PRODSUBID"]=e.value,s["pkey"]=e.itemDomain+"_"+e.value),"IDSPROD.extInstId"===e.itemCode&&(s["IDSPROD.extInstId"]=e.value),"IDSPROD.objType"===e.itemCode&&(s["IDSPROD.objType"]=e.value),"IDSPROD.prodInstSubId"===e.itemCode&&(s["IDSPROD.prodInstSubId"]=e.value))})),s["IDSPROD.NAME"]&&r.push(s)})),n.IDSPROD=r;let c=this.uniqueFun(e,"itemCode");c.map((t=>{let s={ATTRID:"",ATTR_VALUEID:"",ATTR_VALUE:"",OPER_TYPE:"ADD",ATTR_VALUE_OLD:""};t.selValues?t.selValues.map((e=>{e.selected&&(s.ATTRID=t.itemRefid,s.ATTR_VALUEID=e.id,s.ATTR_VALUE=e.value)})):(s.ATTRID=t.itemRefid,s.ATTR_VALUE=t.value,s.ATTR_VALUE_OLD=t.oldValue),n.IDSERV.IDPATTR.push(s)}));let u=[];n.IDEQPT=[],u=this.uniqueFun(s,"actinfoId"),u.map((t=>{var s;null===(s=t.srcEqptList)||void 0===s||s.map((t=>{t.quantity>0&&n.IDEQPT.push(t)}))})),delete n.IDPATTR,this.submitData.busiInfoJson=n;let p=this.allArray.find((t=>"IDSUB.SELLERID"==t.itemCode));this.submitData.reqInfoJson.IDREQ.base_info["IDSYS.SELLERID"]=p.value,this.$emit("closePopup",this.submitData,this.attributeData),this.showMultiPopup=!1},onPlusZero(t){var s;let e=null,i=0,a=0,n=0;this.tabsList[0].checkedList=[],this.sidebarList.map(((t,s)=>{t.children.map((t=>{var s,e;if(t.quantity>0&&(i+=t.quantity),(null===(s=t.srcEqptList)||void 0===s?void 0:s.length)>0&&t.srcEqptList.map((t=>{i+=t.quantity})),t.isHeadType&&t.quantity>0)a++;else if(null!==(e=t.srcEqptList)&&void 0!==e&&e.some((t=>t.quantity>0))||t.quantity>0)return n=1}))})),null===(s=this.sidebarList[t])||void 0===s||s.children.map((t=>{e+=t.quantity,t.srcEqptList&&t.srcEqptList.map((t=>{e+=t.quantity}))})),this.sidebarList[t].badge=0==e?null:e,this.copies=i,this.kind=a+n},handleSource(t,s){let e=t.selected;this.attributeData=[],s.map((t=>{t.selected=!1})),t.selected=!e,this.pattrList.map((t=>{var s;(null===(s=t.selValues)||void 0===s?void 0:s.length)>0&&t.selValues.map((s=>{s.selected&&(s.itemRefid=t.itemRefid,this.attributeData.push(s))}))}))},openPopup(t,s,e){this.showMultiPopup=!0,this.sidebarList=t,this.pattrList=s,this.allArray=e},uniqueFun(t,s){const e=new Map;return t.filter((t=>!e.has(t[s])&&e.set(t[s],1)))},getKindCopiesData(){return{kind:this.kind,copies:this.copies}}}},I=b,y=(0,d.Z)(I,C,D,!1,null,"14953a87",null),_=y.exports,S=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-popup-single"},[e("van-popup",{style:{height:"86%"},attrs:{round:"",position:"bottom"},model:{value:t.showSinglePopup,callback:function(s){t.showSinglePopup=s},expression:"showSinglePopup"}},[e("div",{staticClass:"single-body"},[e("p",{staticClass:"gray ft12 pt15"},[t._v(t._s(t.singleData.title))]),t._l(t.singleData.list,(function(s,i){return e("div",{key:s.id,staticClass:"flex-between ft14 pt18"},[e("div",{staticClass:"g-f1 mr6",class:s.isClass?"active":""},[e("p",[t._v(t._s(s.name))])]),e("div",{staticClass:"flex-end"},[e("van-stepper",{attrs:{"disable-input":"","input-width":"50px",min:0},on:{plus:function(s){return t.onPlus(i)},minus:function(s){return t.onMinus(i)}},model:{value:s.count,callback:function(e){t.$set(s,"count",e)},expression:"item.count"}})],1)])}))],2),e("div",{staticClass:"footer-body"},[e("div",{staticClass:"btn-top"},[t._v("已选 "+t._s(t.kindNum)+" 种 "+t._s(t.casesNum)+" 件")]),e("div",{staticClass:"btn-bom",on:{click:t.onSureSingle}},[e("div",{staticClass:"btn-box"},[t._v("确定")])])])])],1)},T=[],P={name:"productPopupSingle",data(){return{showSinglePopup:!1,singleData:{title:"一氧化碳监测器",list:[{name:"一氧化碳监测器_ JM-LZ2920N",price:"89465.00",id:1,count:0,typeNum:0,isClass:!1},{name:"一氧化碳监测器_ JM-LZJJJJ9",price:"89465.00",id:2,count:0,typeNum:0,isClass:!1}]},checkedName:""}},computed:{kindNum(){let t=0;for(let s in this.singleData.list)t+=this.singleData.list[s].typeNum;return t},casesNum(){let t=0;for(let s in this.singleData.list)t+=this.singleData.list[s].count;return t},nameList(){let t=[];for(let s in this.singleData.list)t.push(this.singleData.list[s].nameStr);return t}},methods:{onSureSingle(){console.log(this.nameList,"nameList"),this.$parent.form.product=this.nameList.toString(),this.showSinglePopup=!1},onPlus(t){this.singleData.list[t].count++,this.singleData.list[t].count>0&&(this.singleData.list[t].typeNum=1,this.singleData.list[t].isClass=!0,this.singleData.list[t].nameStr=this.singleData.list[t].name)},onMinus(t){this.singleData.list[t].count--,0==this.singleData.list[t].count&&(this.singleData.list[t].typeNum=0,this.singleData.list[t].isClass=!1,this.singleData.list[t].nameStr="")},openPopup(t){this.showSinglePopup=!0,console.log("productPopupSingle-单选--",t)}}},L=P,R=(0,d.Z)(L,S,T,!1,null,"1798e29d",null),x=R.exports,E=e(9059),k={components:{swipe:u,descriptiveLabeling:g,productMultiPopup:_,productSinglePopup:x,productSendTo:E.Z},name:"productDetails",data(){return{isHasGoods:!0,isChecked:!1,form:{source:"",period:"",healthCode:"",product:"",address:""},submitForm:{},productName:"",price:"0.00",paragraphWidth:"",isShowPopup:!1,details:{imgList:[],productBasic:{},prodMarketingInfoList:[]},attributeList:[],applyList:[],pattrList:[],allArray:[],prodId:0,addressObj:{}}},created(){this.prodId=this.$route.query.prodId||"126555",this.confData(),this.qryProductDetail()},mounted(){this.$nextTick((()=>{this.paragraphWidth=this.$refs.contentRef.clientWidth+"px"}))},methods:{handlePriceData(t=0){let s=(t/100).toFixed(2);return String(s).replace(/\B(?=(\d{3})+(?!\d))/g,",")},qryProductDetail(){this.$api.qryProductDetail({prodId:this.prodId}).then((t=>{var s;"core.0000"===t.code?(this.details.imgList=t.data.prodImgList||[],this.details.productBasic=t.data.productBasic||[],(null===(s=t.data.prodMarketingInfoList)||void 0===s?void 0:s.length)>0&&t.data.prodMarketingInfoList.map((t=>{t.content=t.content.replace(/\/attach/g,window.location.origin)})),this.details.prodMarketingInfoList=t.data.prodMarketingInfoList||[]):this.$toast.fail(t.reason)}))},confData(){this.attributeList=[],this.applyList=[],this.pattrList=[],this.$api.confData({prodId:this.prodId,serviceTypeId:1}).then((t=>{t.data.length>0&&(this.allArray=t.data,t.data.map((t=>{"UTVAR"!=t.itemUitype&&this.attributeList.push(t)})),this.attributeList.map((t=>{if(t.text=t.itemName,t.badge=null,"IDSPROD"==t.itemDomain){if(t.children=this.attributeList.filter((s=>t.actinfoId==s.parentId)),t.children.length>0)t.children.map((t=>{var s;t.quantity=0,(null===(s=t.srcEqptList)||void 0===s?void 0:s.length)>0&&t.srcEqptList.map((t=>{t.quantity=0})),"ISTMUST"==t.itemSeltype&&(t.quantity=1)}));else{let s={...t,quantity:"ISTMUST"==t.itemSeltype?1:0,isHeadType:!0};delete s.children,t.children.push(s)}this.applyList.push(t)}"IDPATTR"==t.itemDomain&&this.pattrList.push(t)})))}))},handlePopup(t={}){this.pattrList.length>0?this.$refs.productMultiRef.openPopup(this.applyList,this.pattrList,this.allArray):this.$refs.productSingleRef.openPopup(t,this.applyList)},handleAddress(){this.$refs.sendToRef.showPopup=!0},onAddress(t){this.addressObj=t,this.form.address=t.addrDetail},closePopup(t,s){this.submitForm=t,this.productName="",t.busiInfoJson.IDEQPT.length>0&&t.busiInfoJson.IDEQPT.map((t=>{this.productName+=t.mktResName+", "})),s.length>0&&this.attributeList.filter((t=>s.some((s=>{if(s.itemRefid==t.itemRefid)return t.value=s.text}))))},submitBus(){if(!this.form.address)return this.$toast("请选择收货地址");let t={};t.busiInfoJson=JSON.stringify([this.submitForm.busiInfoJson]),t.orderHandlerJson=JSON.stringify(this.submitForm.orderHandlerJson),t.reqInfoJson=JSON.stringify(this.submitForm.reqInfoJson),t.serviceTypeId=1;let s=this.$refs.productMultiRef&&this.$refs.productMultiRef.getKindCopiesData();this.$api.orderSubmit(t).then((t=>{if("core.0000"==t.code){let e=JSON.stringify(t.data);this.$router.push({name:"confirmOrder",query:{orderDto:e,addressDto:JSON.stringify(this.addressObj),kindCopiesDto:JSON.stringify(s)}})}else this.$toast(t.reason)}))}}},w=k,A=(0,d.Z)(w,i,a,!1,null,"b515f6e6",null),N=A.exports},3981:function(t,s,e){t.exports=e.p+"img/details-img.5a071e50.png"}}]);